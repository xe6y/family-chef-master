<view class="register-container">
  <view class="header">
    <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
    <text class="title">完善个人信息</text>
    <text class="subtitle">让我们更好地为您服务</text>
  </view>

  <view class="form-container">
    <!-- 基本信息 -->
    <view class="form-section">
      <view class="section-title">基本信息</view>
      
      <view class="form-item">
        <text class="label">昵称</text>
        <input 
          class="input {{errors.nickname ? 'error' : ''}}"
          placeholder="请输入昵称"
          value="{{formData.nickname}}"
          bindinput="inputNickname"
        />
        <text wx:if="{{errors.nickname}}" class="error-text">{{errors.nickname}}</text>
      </view>

      <view class="form-item">
        <text class="label">手机号 <text class="optional">(选填)</text></text>
        <input 
          class="input {{errors.phone ? 'error' : ''}}"
          type="number"
          placeholder="请输入手机号"
          value="{{formData.phone}}"
          bindinput="inputPhone"
        />
        <text wx:if="{{errors.phone}}" class="error-text">{{errors.phone}}</text>
      </view>
    </view>

    <!-- 家庭设置 -->
    <view class="form-section">
      <view class="section-title">家庭设置</view>
      
      <view class="family-options">
        <view class="option-item" bindtap="toggleInviteInput">
          <view class="option-content">
            <text class="option-title">加入现有家庭</text>
            <text class="option-desc">输入邀请码加入朋友的家庭</text>
          </view>
          <view class="checkbox {{showInviteInput ? 'checked' : ''}}">
            <text class="check-icon" wx:if="{{showInviteInput}}">✓</text>
          </view>
        </view>

        <view class="option-item" bindtap="toggleInviteInput">
          <view class="option-content">
            <text class="option-title">创建新家庭</text>
            <text class="option-desc">成为家庭管理员，邀请家人加入</text>
          </view>
          <view class="checkbox {{!showInviteInput ? 'checked' : ''}}">
            <text class="check-icon" wx:if="{{!showInviteInput}}">✓</text>
          </view>
        </view>
      </view>

      <!-- 邀请码输入 -->
      <view class="form-item" wx:if="{{showInviteInput}}">
        <text class="label">邀请码</text>
        <input 
          class="input"
          placeholder="请输入家庭邀请码"
          value="{{formData.inviteCode}}"
          bindinput="inputInviteCode"
        />
        <text class="help-text">邀请码由家庭管理员提供</text>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="button-group">
      <button 
        class="submit-btn {{loading ? 'loading' : ''}}"
        type="primary"
        bindtap="submitRegister"
        disabled="{{loading}}"
      >
        <text wx:if="{{loading}}">注册中...</text>
        <text wx:else>完成注册</text>
      </button>
      
      <button 
        class="skip-btn"
        bindtap="skipRegister"
        disabled="{{loading}}"
      >
        跳过注册
      </button>
    </view>
  </view>
</view> 